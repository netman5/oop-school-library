#!/usr/bin/env ruby

require_relative './person'
require_relative './book'
require_relative './rental'
require_relative './student'
require_relative './teacher'
require_relative './class_room'
# require_relative './enums'

class App
    # include Enumerables
    attr_accessor :user_name
    def initialize
        @name = user_name
    end

    puts 'Welcome to the School library management system'

    puts 'Please create a username: '
    user_name = gets.chomp
    
    puts "\n"
    puts "Welcome #{user_name}! Please choose an options by entering a number:"

    def run_app
        puts '1 - List all books'
        puts '2 - List all people'
        puts '3 - Create a new person'
        puts '4 - Create a new book'
        puts '5 - Create a new rental'
        puts '6 - List all rentals for a given id'
        puts '7 - Exit'
        
        options = gets.chomp.to_i

        puts "\n"

        if options == 3
            puts '1 to create a student and 2 to create a teacher'
            get_choice = gets.chomp.to_i
            if(get_choice == 1)
                puts 'Please enter the student name: '
                student_name = gets.chomp
                puts 'Please enter the student age: '
                student_age = gets.chomp.to_i
                puts 'Has parent permission? (y/n):'
                parent_permission = gets.chomp
                if(parent_permission == 'y')
                    parent_permission = true
                else
                    parent_permission = false
                end
                puts 'Please enter the student classroom: '
                get_classroom = gets.chomp
                student = Student.new(student_name, student_age, parent_permission, get_classroom)
                puts "Student #{student.name} created!"
            end
        end
    end
end


def main
    app = App.new()
    app.run_app()
end

main()